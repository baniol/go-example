.PHONY: all deps build

KRAKEND_VERSION=$(shell git describe --always --long --dirty --tags)
BIN_NAME=krakend_mux_example_${KRAKEND_VERSION}

run:
	go run cmd/basic/main.go -c config/config.json -p 8080 -d true

all: deps build

deps:
	dep ensure

build:
	go build -a -ldflags="-X github.com/devopsfaith/krakend/core.KrakendVersion=${KRAKEND_VERSION}" -o ${BIN_NAME}
	@echo "You can now use ./${BIN_NAME}"